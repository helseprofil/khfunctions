<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="no" xml:lang="no">
<head>
<!-- 2022-07-08 fre. 14:09 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>KHELSE function</title>
<meta name="author" content="Yusman Kamaleri" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">KHELSE function</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Innhold</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgd5a1ad2">1. SettDefDesignKH</a></li>
<li><a href="#org3df7b86">2. LagFilgruppe</a>
<ul>
<li><a href="#orgb0c1ac0">2.1. Argumenter</a></li>
<li><a href="#org7e14561">2.2. Prosess</a></li>
<li><a href="#org0d42504">2.3. Output</a></li>
</ul>
</li>
<li><a href="#orga2ac8c2">3. FinnFilgruppeParametre</a>
<ul>
<li><a href="#orge211d89">3.1. Argumenter</a></li>
<li><a href="#org1138783">3.2. Output</a></li>
<li><a href="#org60f01e4">3.3. Kommentar</a></li>
</ul>
</li>
<li><a href="#orgb79afb5">4. FinnFilBeskGruppe</a>
<ul>
<li><a href="#org9915e7e">4.1. Argumenter</a></li>
<li><a href="#orgd968f0e">4.2. Output</a></li>
</ul>
</li>
<li><a href="#orgf353350">5. LagTabellFraFil</a>
<ul>
<li><a href="#orged2e69b">5.1. Argumenter</a></li>
<li><a href="#orgddcd6b8">5.2. Output</a></li>
<li><a href="#orga352948">5.3. <span class="todo TODO">TODO</span> Kommentar <code>[0/0]</code></a></li>
</ul>
</li>
<li><a href="#org70b8d00">6. LesFil</a>
<ul>
<li><a href="#orgf26a810">6.1. Argumenter</a></li>
<li><a href="#orgdee7e1b">6.2. Output</a></li>
</ul>
</li>
<li><a href="#org98eb2e9">7. FinnFilGruppeFraKoblid</a>
<ul>
<li><a href="#orgca671cc">7.1. Argumenter</a></li>
<li><a href="#org58dff47">7.2. Output</a></li>
</ul>
</li>
<li><a href="#org5b2269f">8. TilFilLogg</a>
<ul>
<li><a href="#orgd13bc9f">8.1. Argumenter</a></li>
<li><a href="#org2a9cf8d">8.2. Output:</a></li>
</ul>
</li>
<li><a href="#org3f6f320">9. KHCsvread</a>
<ul>
<li><a href="#org317ec88">9.1. Argumenter</a></li>
<li><a href="#org76f08f6">9.2. Output</a></li>
<li><a href="#org18295e1">9.3. Kommentar</a></li>
</ul>
</li>
<li><a href="#orge51ecaa">10. cSVmod</a>
<ul>
<li><a href="#org2bbada8">10.1. Argumenter</a></li>
<li><a href="#org06e20a9">10.2. Output</a></li>
<li><a href="#org8a44e7b">10.3. Kommentar</a></li>
<li><a href="#orgf8d0110">10.4. Forbedring</a></li>
</ul>
</li>
<li><a href="#org87e42e9">11. Generell spørsmål</a>
<ul>
<li><a href="#org8886ab8">11.1. Variable med <code>*.l</code> og <code>*.h</code> extention</a></li>
<li><a href="#org5310cba">11.2. Hva er <code>val.f</code> og <code>val.a</code>, og hvordan den brukes?</a></li>
<li><a href="#orgf364759">11.3. Hva kolonne TYP brukes til i GeoKoder tabell? Verdien er O og U.</a></li>
<li><a href="#org3d0db78">11.4. I Access tabell FILGRUPPER for kolonne ALDER_ALLE som har ingen data</a></li>
</ul>
</li>
<li><a href="#org2965269">12. Access related spørsmål</a>
<ul>
<li><a href="#org7b60a81">12.1. FILGRUPPER tabell</a></li>
</ul>
</li>
<li><a href="#orge268409">13. SPVflagg</a></li>
<li><a href="#org597bdd9">14. Spesialvariabler i R</a></li>
</ul>
</div>
</div>
<p>
Gjennomgang av funksjoner brukes i KHELSE funksjon. Funksjonene som presenteres her er tilnærmet
rekkefølgen de blir kalles inn. Funksjoner som har blitt sjekket har tags <code>##FUN01</code> etc.
</p>
<div id="outline-container-orgd5a1ad2" class="outline-2">
<h2 id="orgd5a1ad2"><span class="section-number-2">1.</span> SettDefDesignKH</h2>
<div class="outline-text-2" id="text-1">
<p>
En del av <code>globs</code>. Henter parametre fra tabell <b>KH_DELER</b>. Lager variabler med TYPE = <code>INT</code> med
extention <code>*.l</code> og <code>*.h</code> for evt. lavest og høyest verdi. Lager en list objekt som følgende:
</p>

<div class="org-src-container">
<pre class="src src-R">  list<span style="color: #076678;">(</span>DelKols<span style="color: #8f3f71;">=</span>DelKols, <span style="color: #a89984;">#</span><span style="color: #a89984;">uten deling FYLKE og GEO i GEOniv</span>
       DelKolsF<span style="color: #8f3f71;">=</span>DelKolsF, <span style="color: #a89984;">#</span><span style="color: #a89984;">med deling for FYLKE og GEO</span>
       KolsDel<span style="color: #8f3f71;">=</span>KolsDel, <span style="color: #a89984;"># </span><span style="color: #a89984;">motsatte av DelKols</span>
       DelKolN<span style="color: #8f3f71;">=</span>DelKolN, <span style="color: #a89984;">#</span><span style="color: #a89984;">kolonne DelKol med attribute fra DEL</span>
       DelType<span style="color: #8f3f71;">=</span>DelType, <span style="color: #a89984;">#</span><span style="color: #a89984;">kolonne TYPE med attribute fra DEL</span>
       DelFormat<span style="color: #8f3f71;">=</span>DelFormat, <span style="color: #a89984;">#</span><span style="color: #a89984;">kolonne FORMAT med attribute fra DEL</span>
       UBeting<span style="color: #8f3f71;">=</span>UBeting,
       BetingOmk<span style="color: #8f3f71;">=</span>BetingOmk,
       BetingF<span style="color: #8f3f71;">=</span>BetingF,
       OmkDel<span style="color: #8f3f71;">=</span>OmkDel,
       DesignKols<span style="color: #8f3f71;">=</span>DesignKols, <span style="color: #a89984;">#</span><span style="color: #a89984;">Kolonne uten TABS</span>
       DesignKolsF<span style="color: #8f3f71;">=</span>DesignKolsF, <span style="color: #a89984;">#</span><span style="color: #a89984;">Kolonne med TABS</span>
       DesignKolsFA<span style="color: #8f3f71;">=</span>DesignKolsFA, <span style="color: #a89984;">#</span><span style="color: #a89984;">Alle kolonne inkludert FYLKE og GEO</span>
       AggPri<span style="color: #8f3f71;">=</span>AggPri, <span style="color: #a89984;">#</span><span style="color: #a89984;">ordered DEL ift. AGGREGERPRI</span>
       AggVedStand<span style="color: #8f3f71;">=</span>AggVedStand, <span style="color: #a89984;">#</span><span style="color: #a89984;">velger only A og K</span>
       IntervallHull<span style="color: #8f3f71;">=</span>IntervallHull,
       AMissAllow<span style="color: #8f3f71;">=</span><span style="color: #8f3f71;">TRUE</span><span style="color: #076678;">)</span>
</pre>
</div>
</div>
</div>



<div id="outline-container-org3df7b86" class="outline-2">
<h2 id="org3df7b86"><span class="section-number-2">2.</span> LagFilgruppe</h2>
<div class="outline-text-2" id="text-2">
<p>
Hovedfunksjon for å lese raw data og slå sammen dataene til en RDS fil.
</p>
</div>
<div id="outline-container-orgb0c1ac0" class="outline-3">
<h3 id="orgb0c1ac0"><span class="section-number-3">2.1.</span> Argumenter</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>gruppe :</li>
<li>batchdate : fra <b>SettKHBatchDate()</b></li>
<li>globs : from <b>FinnGlobs()</b></li>
<li>diagnose = 0</li>
<li>printR = TRUE</li>
<li>printCSV = FALSE</li>
<li>printSTATA = FALSE</li>
<li>versjonert = FALSE</li>
<li>dumps = list()</li>
</ul>
</div>
</div>
<div id="outline-container-org7e14561" class="outline-3">
<h3 id="org7e14561"><span class="section-number-3">2.2.</span> Prosess</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Beskrivelse av prosessene:
</p>
<ul class="org-ul">
<li><b>FinnfilgruppeParametre()</b> lager <b>FGP</b> object</li>
<li><b>FinnFilBeskGruppe()</b> lager <b>filbesk</b> object</li>
<li>Loop alle rader i <code>filbesk</code> og lager følgende:
<ul class="org-ul">
<li><b>filn</b> som er absolutt path til filen</li>
<li><b>AAR</b> hvis det ikke er spesifisert eller skrevet som <code>&lt;$y&gt;</code> skal value hentes fra DEFAAR i ORIGINALFILER tabell</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org0d42504" class="outline-3">
<h3 id="org0d42504"><span class="section-number-3">2.3.</span> Output</h3>
</div>
</div>

<div id="outline-container-orga2ac8c2" class="outline-2">
<h2 id="orga2ac8c2"><span class="section-number-2">3.</span> FinnFilgruppeParametre</h2>
<div class="outline-text-2" id="text-3">
<p>
Setter inn parameter til en filgruppenavn. Access tabell <code>FILGRUPPER</code> brukes i denne funksjonen.
Denne produserer object <b>FGP</b> til viderebruk.
</p>
</div>
<div id="outline-container-orge211d89" class="outline-3">
<h3 id="orge211d89"><span class="section-number-3">3.1.</span> Argumenter</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li>gruppe : Filgruppenavn</li>
<li>batch  : fra <b>SettKHBatchDate()</b>. Denne lager dagens dato til format &laquo;%Y-%m-%d-%H-%M&raquo;</li>
<li>globs  : fra <b>FinnGlobs()</b> function.</li>
</ul>
</div>
</div>
<div id="outline-container-org1138783" class="outline-3">
<h3 id="org1138783"><span class="section-number-3">3.2.</span> Output</h3>
<div class="outline-text-3" id="text-3-2">
<p>
En tabell av type <i>list</i> hentet fra tabell <b>FILGRUPPER</b>. I tillegg legges det 3 til dvs. <code>vals</code>,
<code>amin</code> og <code>amax</code>. De to siste er for alder minimum og maksium hentet fra kolonne <code>ALDER_ALLE</code>. List
<code>vals</code> i tillegg inneholder 3 tillegg lister <code>$vals$verdi_i_VAL1navn</code>, <code>$vals$verdi_i_VAL1navn$miss</code> og
<code>$vals$verdi_i_VAL1navn$miss</code>. Det samme for VAL2 og VAL3. F.eks for filgruppe ARBEIDSLEDIGE så blir det:
</p>
<pre class="example" id="org63d4d60">
  $vals
  $vals$ARBEIDSLEDIGE
  $vals$ARBEIDSLEDIGE$miss
  [1] "0"

  $vals$ARBEIDSLEDIGE$sumbar
  [1] "1"

</pre>
</div>
</div>
<div id="outline-container-org60f01e4" class="outline-3">
<h3 id="org60f01e4"><span class="section-number-3">3.3.</span> Kommentar</h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li>Sjekk aktiv filgruppenavn basert på tidsperiode dvs. <code>VERSJONFRA</code> og <code>VERSJONTIL</code> i Access tabell,
men denne informasjon er ikke brukes eller oppdateres. Object <code>FGPaktiv</code>.</li>
<li>Sjekk hvis det er duplikater filgruppenavn. Denne er unødvendig hvis kolonne <code>FILGRUPPE</code> er nøkkel
eller unik i Access tabell.</li>
<li>Object <code>amax</code> for maksimal aldre hentes fra Access tabel <b>HOVEDPARAMETREg</b>, men der er det bare en
linje som lager default for maks alder. Kan dette gjøres annen sted eller er dette egentlig en ubrukt tabell?</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgb79afb5" class="outline-2">
<h2 id="orgb79afb5"><span class="section-number-2">4.</span> FinnFilBeskGruppe</h2>
<div class="outline-text-2" id="text-4">
<p>
Henter filnavn og path gjennom informasjon i Access tabell ORIGINALFILER, INNLESING og
ORGINNLESkobl. Denne funksjonen produserer object <b>delfiler</b> til viderebruk.
</p>
</div>
<div id="outline-container-org9915e7e" class="outline-3">
<h3 id="org9915e7e"><span class="section-number-3">4.1.</span> Argumenter</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li>gruppe : filgruppenavn</li>
<li>batchdate = NULL</li>
<li>globs : fra <code>FinnGlobs()</code></li>
</ul>

<p>
SQL spesifikasjonen som brukes:
</p>

<div class="org-src-container">
<pre class="src src-R">     sqlt<span style="color: #8f3f71;">&lt;-</span>paste<span style="color: #076678;">(</span><span style="color: #79740e;">"SELECT KOBLID, ORIGINALFILER.FILID AS FILID, FILNAVN, FORMAT, DEFAAR, INNLESING.*</span>
<span style="color: #79740e;">                 FROM INNLESING INNER JOIN</span>
<span style="color: #79740e;">                 (  ORGINNLESkobl INNER JOIN ORIGINALFILER</span>
<span style="color: #79740e;">                 ON ORGINNLESkobl.FILID = ORIGINALFILER.FILID)</span>
<span style="color: #79740e;">                 ON   (INNLESING.DELID = ORGINNLESkobl.DELID)</span>
<span style="color: #79740e;">                 AND (INNLESING.FILGRUPPE = ORGINNLESkobl.FILGRUPPE)</span>
<span style="color: #79740e;">                 WHERE INNLESING.FILGRUPPE='"</span>,filgruppe,<span style="color: #79740e;">"'</span>
<span style="color: #79740e;">                 AND ORIGINALFILER.IBRUKFRA&lt;="</span>,datef,<span style="color: #79740e;">"</span>
<span style="color: #79740e;">                 AND ORIGINALFILER.IBRUKTIL&gt;"</span>, datef,<span style="color: #79740e;">"</span>
<span style="color: #79740e;">                 AND INNLESING.VERSJONFRA&lt;="</span>,datef,<span style="color: #79740e;">"</span>
<span style="color: #79740e;">                 AND INNLESING.VERSJONTIL&gt;"</span>,datef,sep<span style="color: #8f3f71;">=</span><span style="color: #79740e;">""</span><span style="color: #076678;">)</span>
</pre>
</div>

<p>
Disse variabler er laget av denne funksjonen:
</p>

<div class="org-src-container">
<pre class="src src-R">  <span style="color: #8f3f71;">&gt;</span> names<span style="color: #076678;">(</span>fb<span style="color: #076678;">)</span>
   <span style="color: #076678;">[</span><span style="color: #8f3f71; font-weight: bold;">1</span><span style="color: #076678;">]</span> <span style="color: #79740e;">"KOBLID"</span>      <span style="color: #79740e;">"FILID"</span>       <span style="color: #79740e;">"FILNAVN"</span>     <span style="color: #79740e;">"FORMAT"</span>      <span style="color: #79740e;">"DEFAAR"</span>
   <span style="color: #076678;">[</span><span style="color: #8f3f71; font-weight: bold;">6</span><span style="color: #076678;">]</span> <span style="color: #79740e;">"ID"</span>          <span style="color: #79740e;">"FILGRUPPE"</span>   <span style="color: #79740e;">"DELID"</span>       <span style="color: #79740e;">"BRUK"</span>        <span style="color: #79740e;">"VERSJONFRA"</span>
  <span style="color: #076678;">[</span><span style="color: #8f3f71; font-weight: bold;">11</span><span style="color: #076678;">]</span> <span style="color: #79740e;">"VERSJONTIL"</span>  <span style="color: #79740e;">"FORMATgml"</span>   <span style="color: #79740e;">"INNLESARG"</span>   <span style="color: #79740e;">"MANHEADER"</span>   <span style="color: #79740e;">"MULTIHEAD"</span>
  <span style="color: #076678;">[</span><span style="color: #8f3f71; font-weight: bold;">16</span><span style="color: #076678;">]</span> <span style="color: #79740e;">"KASTKOLS"</span>    <span style="color: #79740e;">"UNDERTABLOK"</span> <span style="color: #79740e;">"FYLLTAB"</span>     <span style="color: #79740e;">"RESHAPEid"</span>   <span style="color: #79740e;">"RESHAPEmeas"</span>
  <span style="color: #076678;">[</span><span style="color: #8f3f71; font-weight: bold;">21</span><span style="color: #076678;">]</span> <span style="color: #79740e;">"RESHAPEvar"</span>  <span style="color: #79740e;">"RESHAPEval"</span>  <span style="color: #79740e;">"AGGERGER_DF"</span> <span style="color: #79740e;">"RSYNT1"</span>      <span style="color: #79740e;">"RSYNT2"</span>
  <span style="color: #076678;">[</span><span style="color: #8f3f71; font-weight: bold;">26</span><span style="color: #076678;">]</span> <span style="color: #79740e;">"FEILRAPPORT"</span> <span style="color: #79740e;">"GEO"</span>         <span style="color: #79740e;">"GEOd2"</span>       <span style="color: #79740e;">"GRUNNKRETS"</span>  <span style="color: #79740e;">"TKNR"</span>
  <span style="color: #076678;">[</span><span style="color: #8f3f71; font-weight: bold;">31</span><span style="color: #076678;">]</span> <span style="color: #79740e;">"SONER"</span>       <span style="color: #79740e;">"AAR"</span>         <span style="color: #79740e;">"KJONN"</span>       <span style="color: #79740e;">"ALDER"</span>       <span style="color: #79740e;">"UTDANN"</span>
  <span style="color: #076678;">[</span><span style="color: #8f3f71; font-weight: bold;">36</span><span style="color: #076678;">]</span> <span style="color: #79740e;">"SIVST"</span>       <span style="color: #79740e;">"LANDBAK"</span>     <span style="color: #79740e;">"TAB1"</span>        <span style="color: #79740e;">"TAB2"</span>        <span style="color: #79740e;">"TAB3"</span>
  <span style="color: #076678;">[</span><span style="color: #8f3f71; font-weight: bold;">41</span><span style="color: #076678;">]</span> <span style="color: #79740e;">"VAL1"</span>        <span style="color: #79740e;">"VAL2"</span>        <span style="color: #79740e;">"VAL3"</span>        <span style="color: #79740e;">"ALDERkb"</span>     <span style="color: #79740e;">"KJONNkb"</span>
  <span style="color: #076678;">[</span><span style="color: #8f3f71; font-weight: bold;">46</span><span style="color: #076678;">]</span> <span style="color: #79740e;">"TAB1kb"</span>      <span style="color: #79740e;">"TAB2kb"</span>      <span style="color: #79740e;">"TAB3kb"</span>      <span style="color: #79740e;">"KOMMENTAR"</span>   <span style="color: #79740e;">"RAPPORT2"</span>
  <span style="color: #076678;">[</span><span style="color: #8f3f71; font-weight: bold;">51</span><span style="color: #076678;">]</span> <span style="color: #79740e;">"TID"</span>         <span style="color: #79740e;">"PROSESSDATO"</span> <span style="color: #79740e;">"SKALA_VAL1"</span>  <span style="color: #79740e;">"SKALA_VAL2"</span>  <span style="color: #79740e;">"SKALA_VAL3"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd968f0e" class="outline-3">
<h3 id="orgd968f0e"><span class="section-number-3">4.2.</span> Output</h3>
</div>
</div>
<div id="outline-container-orgf353350" class="outline-2">
<h2 id="orgf353350"><span class="section-number-2">5.</span> LagTabellFraFil</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orged2e69b" class="outline-3">
<h3 id="orged2e69b"><span class="section-number-3">5.1.</span> Argumenter</h3>
<div class="outline-text-3" id="text-5-1">
<ul class="org-ul">
<li>filbesk : Object fra <code>FinnFilBeskGruppe()</code> function</li>
<li>FGP : Object fra <code>FinnFilgruppeParametre()</code> function</li>
<li>diagnose = diagnose</li>
<li>globs = globs</li>
<li>versjonert = versjonert</li>
<li>dumps = dumps</li>
</ul>
</div>
</div>
<div id="outline-container-orgddcd6b8" class="outline-3">
<h3 id="orgddcd6b8"><span class="section-number-3">5.2.</span> Output</h3>
</div>
<div id="outline-container-orga352948" class="outline-3">
<h3 id="orga352948"><span class="section-number-3">5.3.</span> <span class="todo TODO">TODO</span> Kommentar <code>[0/0]</code></h3>
<div class="outline-text-3" id="text-5-3">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Hva skal kolonne <b>FYLLTAB</b> brukkes for?</li>
<li class="off"><code>[&#xa0;]</code> Hvor finner man kolonner <b>RESHAPEpre</b> og <b>RESHAPEpost</b>?</li>
<li class="off"><code>[&#xa0;]</code> Hva er <b>GEOd2</b>?</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org70b8d00" class="outline-2">
<h2 id="org70b8d00"><span class="section-number-2">6.</span> LesFil</h2>
<div class="outline-text-2" id="text-6">
<p>
Innkalt under <b>LagTabellFraFil()</b> function
</p>
</div>
<div id="outline-container-orgf26a810" class="outline-3">
<h3 id="orgf26a810"><span class="section-number-3">6.1.</span> Argumenter</h3>
<div class="outline-text-3" id="text-6-1">
<ul class="org-ul">
<li>filbesk</li>
<li>batchdate = batcdate</li>
<li>globs = globs</li>
<li>dumps = dumps</li>
</ul>
</div>
</div>
<div id="outline-container-orgdee7e1b" class="outline-3">
<h3 id="orgdee7e1b"><span class="section-number-3">6.2.</span> Output</h3>
</div>
</div>
<div id="outline-container-org98eb2e9" class="outline-2">
<h2 id="org98eb2e9"><span class="section-number-2">7.</span> FinnFilGruppeFraKoblid</h2>
<div class="outline-text-2" id="text-7">
<p>
Valg filgruppenavn i kolonne FILGRUPPE som match <code>filbesk$KOBLID</code> fra tabell <b>ORGINNLESkobl</b>. Innkalles under
<b>LesFil()</b> i sqlQuery for INSERT i SQL kode med argument <code>filbesk$KOBLID</code>.
</p>
</div>
<div id="outline-container-orgca671cc" class="outline-3">
<h3 id="orgca671cc"><span class="section-number-3">7.1.</span> Argumenter</h3>
<div class="outline-text-3" id="text-7-1">
<ul class="org-ul">
<li>koblid : verdi fra object filbesk$KOBLID</li>
<li>globs  : fra function <b>FinnGlobs()</b></li>
</ul>
</div>
</div>

<div id="outline-container-org58dff47" class="outline-3">
<h3 id="org58dff47"><span class="section-number-3">7.2.</span> Output</h3>
<div class="outline-text-3" id="text-7-2">
<p>
En vector av den filgruppenavn til den spesifisert KOBLID eg. <code>UFORE</code>.
</p>
</div>
</div>
</div>
<div id="outline-container-org5b2269f" class="outline-2">
<h2 id="org5b2269f"><span class="section-number-2">8.</span> TilFilLogg</h2>
<div class="outline-text-2" id="text-8">
<p>
<span class="underline">OBS!</span>: Denne funksjonen ender opp med CRASH nokså ofte! Innkalles under <b>LesFil()</b> for å leser
Access tabell <b>INNLES_LOGG</b> basert på KOBLID og objekt <code>batchdate</code>.
</p>
</div>
<div id="outline-container-orgd13bc9f" class="outline-3">
<h3 id="orgd13bc9f"><span class="section-number-3">8.1.</span> Argumenter</h3>
<div class="outline-text-3" id="text-8-1">
<ul class="org-ul">
<li>koblid :</li>
<li>felt :</li>
<li>verdi :</li>
<li>batchdate : from <b>SettKHBatchDate()</b> function</li>
<li>globs : fra <b>FinnGlobs()</b></li>
</ul>

<p>
Query som brukes bl.a
</p>

<div class="org-src-container">
<pre class="src src-R">  sqlQuery<span style="color: #076678;">(</span>globs$log,paste<span style="color: #b16286;">(</span><span style="color: #79740e;">"DELETE * FROM INNLES_LOGG WHERE KOBLID="</span>,koblid,<span style="color: #79740e;">"AND SV='S'"</span>,sep<span style="color: #8f3f71;">=</span><span style="color: #79740e;">""</span><span style="color: #b16286;">)</span><span style="color: #076678;">)</span>

  upd<span style="color: #8f3f71;">&lt;-</span>paste<span style="color: #076678;">(</span><span style="color: #79740e;">"INSERT INTO INNLES_LOGG ( KOBLID, BATCH, SV, FILGRUPPE ) SELECT="</span>,koblid,<span style="color: #79740e;">",'"</span>,batchdate,<span style="color: #79740e;">"', 'S',"</span>,FinnFilGruppeFraKoblid<span style="color: #b16286;">(</span>koblid<span style="color: #b16286;">)</span>,sep<span style="color: #8f3f71;">=</span><span style="color: #79740e;">""</span><span style="color: #076678;">)</span>
      sqlQuery<span style="color: #076678;">(</span>globs$log,upd<span style="color: #076678;">)</span>

  upd<span style="color: #8f3f71;">&lt;-</span>paste<span style="color: #076678;">(</span><span style="color: #79740e;">"UPDATE INNLES_LOGG SET "</span>,felt,<span style="color: #79740e;">"="</span>,verdi,<span style="color: #79740e;">" WHERE KOBLID="</span>,koblid,<span style="color: #79740e;">" AND SV='S' AND BATCH='"</span>,batchdate,<span style="color: #79740e;">"'"</span>,sep<span style="color: #8f3f71;">=</span><span style="color: #79740e;">""</span><span style="color: #076678;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2a9cf8d" class="outline-3">
<h3 id="org2a9cf8d"><span class="section-number-3">8.2.</span> Output:</h3>
<div class="outline-text-3" id="text-8-2">
<p>
Legger til ny rad i INNLES_LOGG tabell via INSERT eller oppdatere tabellen via UPDATE.
</p>
</div>
</div>
</div>
<div id="outline-container-org3f6f320" class="outline-2">
<h2 id="org3f6f320"><span class="section-number-2">9.</span> KHCsvread</h2>
<div class="outline-text-2" id="text-9">
<p>
Leser inn CSV filer ved bruk <code>read.csv</code> eller <code>data.table::fread</code>.
</p>
</div>
<div id="outline-container-org317ec88" class="outline-3">
<h3 id="org317ec88"><span class="section-number-3">9.1.</span> Argumenter</h3>
<div class="outline-text-3" id="text-9-1">
<ul class="org-ul">
<li>filn : Absolutt sti til filen</li>
<li>header = FALSE</li>
<li>skip = 0</li>
<li>calClasses = &laquo;character&raquo;</li>
<li>sep = &laquo;;&raquo;</li>
<li>quote = &laquo;\&raquo;&laquo; <span class="underline">obs!</span> denne bør være &lsquo;\&raquo;&rsquo;</li>
<li>dec = &laquo;.&raquo;</li>
<li>fill = FALSE</li>
<li>encoding = &laquo;unknown&raquo;</li>
<li>blank.lines.skip = FALSE</li>
<li>na.strings = c(&laquo;NA&raquo;)</li>
<li>brukfread = TRUE</li>
<li>&#x2026;</li>
</ul>
</div>
</div>
<div id="outline-container-org76f08f6" class="outline-3">
<h3 id="org76f08f6"><span class="section-number-3">9.2.</span> Output</h3>
<div class="outline-text-3" id="text-9-2">
<p>
En csv fil med header=FALSE dvs. header i tabellen blir til en ny kolonne. Hvorfor??
</p>
</div>
</div>
<div id="outline-container-org18295e1" class="outline-3">
<h3 id="org18295e1"><span class="section-number-3">9.3.</span> Kommentar</h3>
<div class="outline-text-3" id="text-9-3">
<p>
Koden for å lese csv med <code>fread</code> som produserer <code>data.frame</code> kan skrives slik:
</p>

<div class="org-src-container">
<pre class="src src-R">  fread<span style="color: #076678;">(</span>DT, data.table <span style="color: #8f3f71;">=</span> <span style="color: #8f3f71;">FALSE</span><span style="color: #076678;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orge51ecaa" class="outline-2">
<h2 id="orge51ecaa"><span class="section-number-2">10.</span> cSVmod</h2>
<div class="outline-text-2" id="text-10">
<p>
Restrukturerer dataene ved bruk parametrer fra INNLESING tabell.
</p>
</div>
<div id="outline-container-org2bbada8" class="outline-3">
<h3 id="org2bbada8"><span class="section-number-3">10.1.</span> Argumenter</h3>
<div class="outline-text-3" id="text-10-1">
<ul class="org-ul">
<li>DF : data.frame i CSV format fra KHCsvread eller XLS</li>
<li>filbesk :</li>
<li>header = TRUE</li>
<li>skip = 0
Hvilke rader som skal uttelates ved lesing</li>
<li>slettRader = integer(0)
<b>obs!</b> her bør det være <code>0L</code>. Denne skal velger rader som skal slettes.</li>
<li>sisteRad = 1
Velges hvilken som er siste rader</li>
<li>TomRadSlutt = FALSE Velge hvilken rader som er tommer og subsett data.frame fra rad 1 til raden
som den tomme raden.</li>
<li>FjernTommeRader = FALSE
Slett tomme rader i hele data.frame</li>
<li>FjernTommeKol = TRUE
Slett tomme kolonne</li>
<li>globs = FinnGlobs()</li>
<li>&#x2026;</li>
</ul>
</div>
</div>
<div id="outline-container-org06e20a9" class="outline-3">
<h3 id="org06e20a9"><span class="section-number-3">10.2.</span> Output</h3>
</div>

<div id="outline-container-org8a44e7b" class="outline-3">
<h3 id="org8a44e7b"><span class="section-number-3">10.3.</span> Kommentar</h3>
<div class="outline-text-3" id="text-10-3">
<p>
Flere argumenter som egentlig gjør nesten det samme oppgavene. Alternativ å finne tomme rader
eller kolonne kan brukes <code>apply</code> og er nok raskere.
</p>

<div class="org-src-container">
<pre class="src src-R">    rnames <span style="color: #8f3f71;">&lt;-</span> rownames<span style="color: #076678;">(</span>DF<span style="color: #b16286;">[</span>apply<span style="color: #8ec07c;">(</span>is.na<span style="color: #d65d0e;">(</span>DF<span style="color: #d65d0e;">)</span> <span style="color: #8f3f71;">|</span> DF <span style="color: #8f3f71;">==</span> <span style="color: #79740e;">""</span>, <span style="color: #8f3f71; font-weight: bold;">1</span>, all<span style="color: #8ec07c;">)</span>, <span style="color: #b16286;">]</span><span style="color: #076678;">)</span> <span style="color: #a89984;">#</span><span style="color: #a89984;">for rader</span>
    knames <span style="color: #8f3f71;">&lt;-</span> rownames<span style="color: #076678;">(</span>DF<span style="color: #b16286;">[</span>apply<span style="color: #8ec07c;">(</span>is.na<span style="color: #d65d0e;">(</span>DF<span style="color: #d65d0e;">)</span> <span style="color: #8f3f71;">|</span> DF <span style="color: #8f3f71;">==</span> <span style="color: #79740e;">""</span>, <span style="color: #8f3f71; font-weight: bold;">2</span>, all<span style="color: #8ec07c;">)</span>, <span style="color: #b16286;">]</span><span style="color: #076678;">)</span> <span style="color: #a89984;">#</span><span style="color: #a89984;">for kolonner</span>

    which<span style="color: #076678;">(</span>rownames<span style="color: #b16286;">(</span>DF<span style="color: #b16286;">)</span> <span style="color: #8f3f71;">%in%</span> tnames<span style="color: #076678;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf8d0110" class="outline-3">
<h3 id="orgf8d0110"><span class="section-number-3">10.4.</span> Forbedring</h3>
<div class="outline-text-3" id="text-10-4">
<ul class="org-ul">
<li>Finne ut i INNLESSING tabell hvor mange som har <code>FjernTommeRader</code> og <code>FjernTommeKol</code>. Sjekk</li>
</ul>
<p>
hvordan filen ser ut og tilpasse deretter før ny database lages.
</p>
</div>
</div>
</div>

<div id="outline-container-org87e42e9" class="outline-2">
<h2 id="org87e42e9"><span class="section-number-2">11.</span> Generell spørsmål</h2>
<div class="outline-text-2" id="text-11">
<p>
Alle type spørsmål som trenger oppklaring:
</p>
</div>
<div id="outline-container-org8886ab8" class="outline-3">
<h3 id="org8886ab8"><span class="section-number-3">11.1.</span> Variable med <code>*.l</code> og <code>*.h</code> extention</h3>
<div class="outline-text-3" id="text-11-1">
<p>
Alle år og aldre er ALLTID intervaller i hele systemet. Dermed brukes alltid AARl/AARh og
ALDERl/ALDERh. Dette gjelder selv om det bare dreire seg om enkelte kalenderår (AARl=2020,
AARh=2020) eller enkle aldersår (ALDERl=30,ALDERh=30).
</p>
</div>
</div>
<div id="outline-container-org5310cba" class="outline-3">
<h3 id="org5310cba"><span class="section-number-3">11.2.</span> Hva er <code>val.f</code> og <code>val.a</code>, og hvordan den brukes?</h3>
<div class="outline-text-3" id="text-11-2">
<p>
<code>val.a</code> og <code>val.f</code> er to flagg som alltid går hånd i hånd med hver verdikolonne. Detaljene kan
våre ganske kompliserte, men i hovedtrekk:
</p>

<p>
<code>val.a</code> teller opp hvor mange originaltall som har vårt brukt til å lage verdien. Eksempler:
Når to kommuner slås sammen for kommuneharmonisering blir det typisk <code>val.a=2</code>. Når tall for
5 enkeltaldre slås sammen til en 5 års aldersgruppe blir det <code>val.a=5</code>. De to tilfellen i
kombinasjon gir <code>val.a=10</code>
</p>

<p>
<code>val.f</code> er strengt tatt viktigere. Den angir i hovedtrekk hvorfor tall er NA. Er det fordi tallet
mangler originalt, er det fordi det ikke lar seg bergene, er det fordi det anonymisres osv.
</p>

<p>
Men begge <code>val.a</code> og <code>val.f</code> får statis ferdi henholdsvis 0 og 1. Se <a href="https://github.com/helseprofil/khfunctions/blob/master/KHfunctions.R#L986">koden</a>.
</p>

<div class="org-src-container">
<pre class="src src-R">  valok<span style="color: #8f3f71;">&lt;-</span><span style="color: #8f3f71; font-weight: bold;">1</span>
  valf<span style="color: #8f3f71;">&lt;-</span>paste<span style="color: #076678;">(</span>val,<span style="color: #79740e;">".f"</span>,sep<span style="color: #8f3f71;">=</span><span style="color: #79740e;">""</span><span style="color: #076678;">)</span>
  vala<span style="color: #8f3f71;">&lt;-</span>paste<span style="color: #076678;">(</span>val,<span style="color: #79740e;">".a"</span>,sep<span style="color: #8f3f71;">=</span><span style="color: #79740e;">""</span><span style="color: #076678;">)</span>
  valomk<span style="color: #8f3f71;">&lt;-</span>paste<span style="color: #076678;">(</span>val,<span style="color: #79740e;">"omk"</span>,sep<span style="color: #8f3f71;">=</span><span style="color: #79740e;">""</span><span style="color: #076678;">)</span>

  <span style="color: #a89984;">##</span><span style="color: #a89984;">Lag omkodet verdi med numerisk. Ikke numerisk blir forel&#248;pig NA</span>
  suppressWarnings<span style="color: #076678;">(</span>DF<span style="color: #b16286;">[</span>,valomk<span style="color: #b16286;">]</span><span style="color: #8f3f71;">&lt;-</span>as.numeric<span style="color: #b16286;">(</span>valKB$omk<span style="color: #b16286;">)</span><span style="color: #076678;">)</span>
  DF<span style="color: #076678;">[</span>,valf<span style="color: #076678;">]</span><span style="color: #8f3f71;">&lt;-</span><span style="color: #8f3f71; font-weight: bold;">0</span>
  DF<span style="color: #076678;">[</span>,vala<span style="color: #076678;">]</span><span style="color: #8f3f71;">&lt;-</span><span style="color: #8f3f71; font-weight: bold;">1</span>
  DF<span style="color: #076678;">[</span>valKB$omk<span style="color: #8f3f71;">==</span><span style="color: #79740e;">".."</span> <span style="color: #8f3f71;">&amp;</span> DF<span style="color: #b16286;">[</span>,val<span style="color: #b16286;">]</span>!<span style="color: #8f3f71;">=</span>valKB$omk,valf<span style="color: #076678;">]</span><span style="color: #8f3f71;">&lt;-</span><span style="color: #8f3f71; font-weight: bold;">1</span>
  DF<span style="color: #076678;">[</span>valKB$omk<span style="color: #8f3f71;">==</span><span style="color: #79740e;">"."</span> <span style="color: #8f3f71;">&amp;</span> DF<span style="color: #b16286;">[</span>,val<span style="color: #b16286;">]</span>!<span style="color: #8f3f71;">=</span>valKB$omk,valf<span style="color: #076678;">]</span><span style="color: #8f3f71;">&lt;-</span><span style="color: #8f3f71; font-weight: bold;">2</span>
  DF<span style="color: #076678;">[</span>valKB$omk<span style="color: #8f3f71;">==</span><span style="color: #79740e;">":"</span> <span style="color: #8f3f71;">&amp;</span> DF<span style="color: #b16286;">[</span>,val<span style="color: #b16286;">]</span>!<span style="color: #8f3f71;">=</span>valKB$omk,valf<span style="color: #076678;">]</span><span style="color: #8f3f71;">&lt;-</span><span style="color: #8f3f71; font-weight: bold;">3</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf364759" class="outline-3">
<h3 id="orgf364759"><span class="section-number-3">11.3.</span> Hva kolonne TYP brukes til i GeoKoder tabell? Verdien er O og U.</h3>
<div class="outline-text-3" id="text-11-3">
<p>
TYP=0 er de Ordinåre geokodene, TYP=U er geokoder som angir &laquo;Uoppgitt&raquo; (slik som at 1199 er
uopgitt kommune under fylket 11). Dette filteret brukes når det produseres kuber og
Firksvik-data, da blir det ikke rapportert tall for U-koder, men disse må våre med fram til da
fordi de inngår i summer som lager totaler for høyere geografisk nivå (1199 tall inngår
i 11 osv).
</p>
</div>
</div>

<div id="outline-container-org3d0db78" class="outline-3">
<h3 id="org3d0db78"><span class="section-number-3">11.4.</span> I Access tabell FILGRUPPER for kolonne ALDER_ALLE som har ingen data</h3>
<div class="outline-text-3" id="text-11-4">
<p>
Noen ganger skreves det som <code>NA</code> eller <code>25_</code>. Når det er <code>NA</code> så plukket verdier fra default ie.
min og maks alder. Når det er bare <code>25_</code> så legges maks alder fra tabell ..
</p>
</div>
</div>
</div>
<div id="outline-container-org2965269" class="outline-2">
<h2 id="org2965269"><span class="section-number-2">12.</span> Access related spørsmål</h2>
<div class="outline-text-2" id="text-12">
<p>
Dette er spørsmål spesifisert til kolonnebruk i Access tabeller.
</p>
</div>
<div id="outline-container-org7b60a81" class="outline-3">
<h3 id="org7b60a81"><span class="section-number-3">12.1.</span> FILGRUPPER tabell</h3>
<div class="outline-text-3" id="text-12-1">
<ul class="org-ul">
<li>Hva kolonne <b>FILTER1</b>, <b>FILTER2</b> og <b>FILTER3</b> brukes til? Verdien er <code>1</code>.</li>
<li>Kolonne <b>ALDER_ALLE</b> har forskjellige verdier bl.a <code>0_120</code>, <code>1_6</code>, <code>25_</code> og ingen verdi? Når
ingen verdi blir det satt 0_120 som min og maks alder. Når det skreves bare <code>25_</code> skal det får
25 som min alder og 120 som maks alder.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orge268409" class="outline-2">
<h2 id="orge268409"><span class="section-number-2">13.</span> SPVflagg</h2>
<div class="outline-text-2" id="text-13">
<p>
Disse gjelder når dataene er kjørt i <code>LagKUBE</code>. Notat er fra Steinar.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Kode i data</th>
<th scope="col" class="org-left">Tegn i KH/NH tabell</th>
<th scope="col" class="org-left">Tekst i fotnote</th>
<th scope="col" class="org-left">Tekst i SSB Statbank fotnote</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">0</td>
<td class="org-left">ingen</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-left">..</td>
<td class="org-left">Manglende data</td>
<td class="org-left">Tallgrunnlag mangler dvs. tall er ikke kommet inn i våre databaser eller er for usikre til å publiseres</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-left">.</td>
<td class="org-left">Lar seg ikke beregne</td>
<td class="org-left">Ikke mulig å oppgi tall dvs. tall finnes ikke på dette tidspunktet fordi kategorien ikke var i bruk da tallene ble samlet inn</td>
</tr>

<tr>
<td class="org-right">3</td>
<td class="org-left">:</td>
<td class="org-left">Anonymisert</td>
<td class="org-left">Vises ikke av konfidensialitetshensyn dvs. tall publiseres ikke for å unngå å identifisere personer eller virksomheter</td>
</tr>
</tbody>
</table>


<p>
Kodene settes i gamleløypa (KHfunctions.R, i kubeproduksjonstrinnet) i variabler
med navn &lt;måtall&gt;.f . Det er flere koder i bruk inne i databehandlingen, fordi
ulike årsaker til at det mangler tall må behandles ulikt ved aggregering,
prikking og skjuling. Helt til slutt i LagKUBE oversettes de interne kodene til
en av de tre vist ovenfor.
</p>

<p>
Den koden som kommer ut i kuben, ser ikke alltid logisk ut. I flere tilfeller
har vi skrevet postprosesseringsscript som har &laquo;ryddet opp&raquo; i kodene, når vi vet
at det er spesielle årsaker til at større grupper i dataene (for eksempel
bydelene i noen byer) har manglende tall.
</p>
</div>
</div>
<div id="outline-container-org597bdd9" class="outline-2">
<h2 id="org597bdd9"><span class="section-number-2">14.</span> Spesialvariabler i R</h2>
<div class="outline-text-2" id="text-14">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">..a</td>
<td class="org-left">Antall rader tallet stammer fra (Kommunesammenslåinger!,  M+K -&gt; Kjønn samlet, o.l.)</td>
</tr>

<tr>
<td class="org-left">..f</td>
<td class="org-left">Flagg, blir til SPVflagg etter et sett regler. Det er ett slikt flagg for hver tallvariabel, men de samles til en verdi i SPVflagg. Reglene er bl.a. :</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">- Verdier 1-2-3 blir til det samme i SPVflagg. Kan altså sette disse direkte, hvis de skal rettes.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">- Verdier -1 og 4 blir til SPVflagg=3, verdi 9 blir til =1.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">+ Verdi 4 betyr &laquo;Naboprikket&raquo;, og utløser ikke skjuling av serier.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">- Verdi 8: Dukket opp i Skjenketidsslutt og Skjenkesteder for kommuner med tom celle i inndata. Har ikke klart å finne ut hva kodene betyr, og Kåre husker ikke/har ikke tid til å grave det fram - det var en komplisert hack for å håndtere ubalanse i Sysvak.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">+ Håndtert ved å legge følgende i KODEBOK for aktuell innlesingsspec: Tom celle i VAL1 kodes til &laquo;..&raquo; (uten gåseøyne).</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">- Hvis verdien skal korrigeres til et høyere tall i min RSYNT, holder det å endre i en av de måltallkolonnene som skal leveres ut (da bruker systemet den høyeste verdien for alle ut-kolonner). Men hvis jeg skal korrigere nedover, f.eks. til SPVflagg==1, må jeg behandle alle ut-kolonnene. DET ER TRYGGEST å ta alle, uansett &#x2026;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">- Erfaring: Reglene virker bare skikkelig når filen bruker standardvariablene. Se nedenfor.*</td>
</tr>

<tr>
<td class="org-left">..n</td>
<td class="org-left">Antall <i>årganger</i> tallet stammer fra (f.eks. ved glidende snitt)</td>
</tr>

<tr>
<td class="org-left">MALTALL</td>
<td class="org-left">Er en intern resultatkolonne, som kopieres til riktig ut-kolonne.  På stadiet &laquo;RSYNT_POSTPROSESS&raquo; er den ferdig brukt og overflødig, den dør like etter.</td>
</tr>

<tr>
<td class="org-left">STANDARD</td>
<td class="org-left">Dersom standardkolonnene fins, er det de som blir levert ut. Teller, Rate, Meis og SMR.</td>
</tr>

<tr>
<td class="org-left">ANDRE</td>
<td class="org-left">Sjekk i FILFILTRE. Der kan det være spesifisert mellomregninger etc. (Eks. : Vaksgrad (i Sysvak) - stå som navn på VAL1 i innlesingen, er faktisk levert vaks.dekning, men brukes i beregning av Teller spesifisert i FILFILTRE.)</td>
</tr>
</tbody>
</table>

<p>
<b>Flagg når det er spesielle variabelnavn:</b> Overfør rettinger til et av
standardflaggene!
</p>

<p>
&laquo;Vedvarende lavinntekt NH&raquo; brukte ingen av de standard
tallvariablene som har en tilhørende <b>_f</b>-variabel (teller, nevner, rate), og
dermed var heller ingen av standard <b>_f</b> -variablene i bruk (alt var missing i
disse). Det fantes et måltall <code>LAVINNT_VEDV</code>, med tilhørende <code>LAVINNT_VEDV_f</code> , men
da fungerte ikke produksjon av SPVflagg i henhold til denne flaggvariabelen.
SPVflagg ble feil, og retting i <code>LAVINNT..._f</code> i en Rsynt-Postprosess virket ikke.
</p>

<p>
<b>Jeg satte replace RATE_f = LAVINNT_VEDV_f til slutt i en Rsynt-Postprosess, og
da slo endringene inn i SPVflagg.</b>
</p>
</div>
</div>
</div>
</body>
</html>
